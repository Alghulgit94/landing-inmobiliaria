<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>GSAP Animation Test - Inmobiliaria Mega Proyectos</title>
    <link rel="stylesheet" href="assets/css/index.css">
    <style>
        body {
            margin: 0;
            font-family: 'Inter', sans-serif;
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .test-section {
            margin-bottom: 40px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .test-title {
            color: #1F4B43;
            margin-bottom: 15px;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>GSAP Animation Implementation Test</h1>
        
        <div class="test-section">
            <h2 class="test-title">GSAP Library Status</h2>
            <div id="gsap-status" class="status">Testing...</div>
        </div>
        
        <div class="test-section">
            <h2 class="test-title">ScrollTrigger Plugin Status</h2>
            <div id="scrolltrigger-status" class="status">Testing...</div>
        </div>
        
        <div class="test-section">
            <h2 class="test-title">Animation Functions Status</h2>
            <div id="animation-functions-status" class="status">Testing...</div>
        </div>
        
        <div class="test-section">
            <h2 class="test-title">Carousel Integration Status</h2>
            <div id="carousel-status" class="status">Testing...</div>
        </div>
        
        <div class="test-section">
            <h2 class="test-title">Reduced Motion Support</h2>
            <div id="reduced-motion-status" class="status">Testing...</div>
        </div>

        <!-- Test Elements -->
        <div class="test-section">
            <h2 class="test-title">Animation Test Elements</h2>
            <div class="hero__title">Test Hero Title</div>
            <div class="section__title">Test Section Title</div>
            <button class="btn-primary">Test Button</button>
        </div>
    </div>

    <!-- GSAP Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/TextPlugin.min.js"></script>
    
    <!-- Test Script -->
    <script>
        function updateStatus(elementId, success, message) {
            const element = document.getElementById(elementId);
            element.className = `status ${success ? 'success' : 'error'}`;
            element.textContent = message;
        }

        function runTests() {
            // Test 1: GSAP Library
            try {
                if (typeof gsap !== 'undefined') {
                    updateStatus('gsap-status', true, '✓ GSAP library loaded successfully (v' + gsap.version + ')');
                } else {
                    updateStatus('gsap-status', false, '✗ GSAP library not found');
                }
            } catch (e) {
                updateStatus('gsap-status', false, '✗ Error: ' + e.message);
            }

            // Test 2: ScrollTrigger Plugin
            try {
                if (typeof ScrollTrigger !== 'undefined') {
                    gsap.registerPlugin(ScrollTrigger);
                    updateStatus('scrolltrigger-status', true, '✓ ScrollTrigger plugin loaded and registered');
                } else {
                    updateStatus('scrolltrigger-status', false, '✗ ScrollTrigger plugin not found');
                }
            } catch (e) {
                updateStatus('scrolltrigger-status', false, '✗ Error: ' + e.message);
            }

            // Test 3: Animation Functions
            try {
                if (typeof window.animateCarouselTransition === 'function') {
                    updateStatus('animation-functions-status', true, '✓ Custom animation functions available');
                } else {
                    updateStatus('animation-functions-status', false, '✗ Custom animation functions not found (animations.js may not be loaded)');
                }
            } catch (e) {
                updateStatus('animation-functions-status', false, '✗ Error: ' + e.message);
            }

            // Test 4: Carousel API
            try {
                if (typeof window.CarouselAPI === 'object' && window.CarouselAPI.goToSlide) {
                    updateStatus('carousel-status', true, '✓ Carousel API is available');
                } else {
                    updateStatus('carousel-status', false, '✗ Carousel API not found (index.js may not be loaded)');
                }
            } catch (e) {
                updateStatus('carousel-status', false, '✗ Error: ' + e.message);
            }

            // Test 5: Reduced Motion Support
            try {
                const prefersReducedMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
                updateStatus('reduced-motion-status', true, prefersReducedMotion ? 
                    '✓ Reduced motion preference detected - animations will be minimal' : 
                    '✓ No reduced motion preference - full animations enabled');
            } catch (e) {
                updateStatus('reduced-motion-status', false, '✗ Error: ' + e.message);
            }

            // Run a simple GSAP test animation
            if (typeof gsap !== 'undefined') {
                const testButton = document.querySelector('.btn-primary');
                if (testButton) {
                    gsap.from(testButton, {
                        scale: 0.8,
                        opacity: 0.5,
                        duration: 1,
                        ease: "back.out(1.7)",
                        delay: 0.5
                    });
                }
            }
        }

        // Run tests when page loads
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', runTests);
        } else {
            runTests();
        }
    </script>
    
    <!-- Load our animation scripts -->
    <script src="assets/js/i18n.js"></script>
    <script src="assets/js/index.js"></script>
    <script src="assets/js/animations.js"></script>
</body>
</html>